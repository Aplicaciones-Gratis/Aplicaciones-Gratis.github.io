<meta name="viewport" content="width=device-width, initial-scale=1.0"&amp;gt;/>
<div style="margin-top: 20px;text-align: center;"><span style="color: #ff6b6b; font-size: large;">CHAT</span></div><div style="color: lightgrey; text-align: center;">Comenten sobre las aplicaciones aquí, utilícenlo adecuadamente por favor.</div>
<div id="ante"></div>
<section class="home-section">
<div id="div14">
      <br />
      <div id="chatUL">
        Cargando...
      </div>
        <a id="button4bajo" onclick="bajar()"><div style="align-items: center; background: rgb(70, 71, 73); border-radius: 50%; cursor: pointer; display: flex; height: 42px; justify-content: center; margin-bottom: 3px; margin-top: 3px; opacity: 0.9; width: 42px;"><svg height="20" viewbox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M3.8 6.7l5.7 5.7 5.7-5.7 1.6 1.6-7.3 7.2-7.3-7.2 1.6-1.6z" fill="#FFFFFF"></path></svg></div></a>
      <form><br /><br /><label style="color: lightgrey;">Nombre:</label>
      <input id="conin" style="border: none; color: black; font-family: sans-serif; font-size: 15px; margin-top: 15px; max-width: 190px; outline: none; width: calc(100% - 70px);" type="text" />      
      <textarea id="mensaje" name="mensaje" onkeyup="validar(event)" style="border-color: white; font-family: sans-serif; font-size: 15px; height: 39px; margin-top: 10px; outline: none;"></textarea>
      <button id="btnEnviar" onclick="clicado()" style="margin-top: 8px;" type="button"><svg fill="#FEFEFE" height="25px" style="cursor: pointer; margin-left: 5px;" viewbox="0 0 535.5 535.5" width="25px" xmlns="http://www.w3.org/2000/svg">
      <polygon points="0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75">
      </polygon></svg></button><br /><input id="archivoo" ondragleave="dragleaveHandler(event);" ondragover="dragOverHandler(event);" ondrop="dropHandler(event);" style="max-width: 300px;width: 80%;cursor: pointer;color: white;" type="file" /><br /><progress id="progreso" max="100" style="display: none;" value="0"></progress>
      </form>
      </div>

  </section>
<script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-analytics.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-database.js"></script>
	  <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-storage.js"></script>
      <script>
      navegar=navigator.userAgent;
      moes=["Mobile","iPhone","iPod","BlackBerry","Opera Mini","Sony","MOT","Nokia","samsung"];
      detctor=0;
      for (i in moes) {
         comprueo=navegar.indexOf(moes[i]); 
         if (comprueo>-1) { 
            detctor=1;}}
      var mover=0;
      var inicio="si";
      var firebaseConfig = {
          apiKey: "AIzaSyCD7U9Nv6_l4jx-Ib4JW8Wn4STwvPK-wG4",
          authDomain: "aplicaciones-gratis-chat.firebaseapp.com",
          projectId: "aplicaciones-gratis-chat",
          storageBucket: "aplicaciones-gratis-chat.appspot.com",
          messagingSenderId: "1064882614707",
          appId: "1:1064882614707:web:20f8e52f713c9300895bc6",
          measurementId: "G-PPL3K4ESWS"
      };
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
        var txtMensaje =document.getElementById('mensaje');
        var chatUL =document.getElementById('chatUL');
        function clicado(){
          if (document.getElementById('archivoo').value === "") {
      var mensaje = txtMensaje.value;
        if (Object.entries(mensaje.trim()).length === 0) {
        } else {
      var nombre = document.getElementById("conin").value.trim();
      if (nombre.length === 0) {nombre="anónimo"};
      var dia = new Date();
      var mes=(dia.getMonth() + 1)
      var fecha =(" "+dia.getHours()+":"+dia.getMinutes()+"  "+dia.getDate()+"/"+mes+"/"+dia.getFullYear());
      firebase.database().ref().child('chat').push({name: nombre,message: mensaje,fecha: fecha,ocultoono: "none"});
      txtMensaje.value="";document.getElementById("button4bajo").click();
      var el = document.getElementById("mensaje");
        setTimeout(function(){
        el.style.cssText +='height:auto;'
        el.style.cssText += 'height:' + (el.scrollHeight+2) + 'px;';});
        document.getElementById("button4bajo").click();
        if (detctor==1){}else{document.getElementById("mensaje").focus();}}
          }else{
          const file = document.getElementById('archivoo').files[0];
          const storageRef = firebase.storage().ref(file.name);
          const task = storageRef.put(file);
          document.getElementById("progreso").style.cssText="display:inline;";
          document.getElementById("btnEnviar").style.cssText="display:none;margin-top: 8px;";
          task.on("state_changed",function(snapshot){
          var percentage = (snapshot.bytesTransferred/snapshot.totalBytes)*100;
          document.getElementById("progreso").value = percentage;
          if(percentage==100){
              document.getElementById("progreso").style.cssText="display:none;";
              document.getElementById("btnEnviar").style.cssText="display:inline;margin-top: 8px;";
              var nombre = document.getElementById("conin").value.trim();
     		  if (nombre.length === 0) {nombre="anónimo"};
              var dia = new Date();
              var mes=(dia.getMonth() + 1)
              var fecha =(" "+dia.getHours()+":"+dia.getMinutes()+"  "+dia.getDate()+"/"+mes+"/"+dia.getFullYear());
              firebase.database().ref().child('chat').push({name: nombre,message: file.name,fecha: fecha,ocultoono: "inline"});
              document.getElementById('archivoo').value=""
              document.getElementById("progreso").value = 0;
              document.getElementById("button4bajo").click();
              var el = document.getElementById("mensaje");
                setTimeout(function(){
                el.style.cssText +='height:auto;'
                el.style.cssText += 'height:' + (el.scrollHeight+2) + 'px;';});
                document.getElementById("button4bajo").click();
                if (detctor==1){}else{document.getElementById("mensaje").focus();}
           }})
        }};
        firebase.database().ref().child('chat')
        .on('value',function(snapshot) {
        var sionomover="no";
        var objDiv = document.getElementById("chatUL");
        if ((objDiv.scrollHeight-objDiv.scrollTop)<865) {sionomover="si";}     
        var mover2=0;
        var html ='';
        snapshot.forEach(function(e){
          var element= e.val();
          var nombre=element.name;
          var mensaje = element.message;
          var ocultoono = element.ocultoono
          var link = mensaje
          var fecha = element.fecha;
          var keey = e.key.toString();
          if (element.ocultoono=="none") {
          mensaje = mensaje.replaceAll("<","&lt;");
          mensaje = mensaje.replaceAll(">","&gt;");
          if (mensaje.toString().includes(' ')===true) {
          mensaje = mensaje.replace(/https([^]+) /g,"<a target='_blank' href='https$1'>https$1 </a>");
          }else{mensaje = mensaje.replace(/https([^]+)/g,"<a target='_blank' href='https$1'>https$1</a>");}}        
            html +="<div style='margin-bottom: 6px;margin-top: 6px;margin-left: 5px;margin-right: 8px;border-color: #3a3a3a;background-color: #3a3a3a;border-radius: 10px;'><textarea class='uno' readonly='readonly'>"+nombre+"</textarea><svg id='"+keey+"' onclick='hecv(this.id)' style='margin-top: 5px;margin-right: 2px;float:right;' fill=#ffffff width='20' height='20' viewBox='0 0 26 26'><path d='M18.4 4L12 10.4L5.6 4L4 5.6L10.4 12L4 18.4L5.6 20L12 13.6L18.4 20L20 18.4L13.6 12L20 5.6L18.4 4Z'></path></svg><br><pre style='border-color: #3a3a3a;background-color: #3a3a3a;top:auto;resize: none;color:#FFFFFF;outline: none;margin-left: 5px;' readonly='readonly' class='dos'>"+mensaje+"</pre><a style='cursor:pointer;margin-left:5px;color: #4b74b7;font-size:12px;display:"+ocultoono+";' onclick='descargararchi(this.title)' title='"+link+"' target='_blank'>Descargar</a><br><a class='tres'>"+fecha+"</a></div>";
            mover2+=1;
        });
        chatUL.innerHTML=html;
        if (mover2>mover) {
        if (inicio==="si") {
        inicio="no";
        document.getElementById("button4bajo").click();
        }else{
        if (sionomover==="si") {
        document.getElementById("button4bajo").click();
        }
        }
        mover=mover2;
        } else {
        mover=mover2;
        }
        });
        function validar(e) {
        tecla = (document.all) ? e.keyCode : e.which;
        if (tecla==13){
        if (e.shiftKey==1){
        }else{
        var txtMensaje =document.getElementById('mensaje');
        var mensaje = txtMensaje.value.trim();
        if (Object.entries(mensaje).length === 0) {
        }else{
        if (detctor==1) {}else{
        document.getElementById("btnEnviar").click();
        }}}}}
        function hecv(cha){
        firebase.database().ref().child('chat/'+cha).remove();}
                
        function bajar(){
        var objDiv = document.getElementById("chatUL");
        objDiv.scrollTop = objDiv.scrollHeight;
        }
          function dropHandler(ev) {
   document.getElementById("archivoo").style.cssText = "cursor: pointer;"
}
        function dragleaveHandler(ev) {
        document.getElementById("archivoo").style.cssText = "cursor: pointer;"
        }
function dragOverHandler(ev){ 
  document.getElementById("archivoo").style.cssText += "cursor: pointer;background-color: #3a3a12; color: #d6d852;"
}
        function descargararchi(nombre) {
          var storageRef = firebase.storage().ref(nombre);
          storageRef.getDownloadURL().then(function(url) {
          window.open(url, '_blank');
          })
          .catch(function(error) {
            alert("Este archivo a sido eliminado");
          })
        };
      </script>
  <style>
*{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Poppins" , sans-serif;
}
.home-section .text{
  display: inline-block;
  color: #11101d;
  font-size: 25px;
  font-weight: 500;
  margin: 18px
}

#chatUL::-webkit-scrollbar-track
{
    -webkit-box-shadow: inset 0 0 6px rgb(0 0 0 / 30%);
    background-color: #202020;
    border-radius: 10px;
}

#chatUL::-webkit-scrollbar
{
    width: 10px;
    background-color: #202020;
}

#mensaje{
color: black;
max-height:100px;
min-height: 41px;
width: calc(100% - 60px);
overflow: auto;
resize: none;
}
    
#chatUL::-webkit-scrollbar-thumb
{
border-radius: 10px;
background-color: #575758;
}

*,*:after, *:before{
margin:  0;
padding: 0;
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box;
}
#btnEnviar{cursor: pointer;margin-top: -3px;width: 48px;height: 48px;margin-left: 8px;position: absolute;border: none;background: #464749;border-radius: 50%;justify-content: center;align-items: center;}
#div14{
    max-width: 850px;
    margin: auto;
    position: relative;
}
#{
max-width:95%;
max-height:100px;
min-height: 41px;
min-width: 95%;
overflow: auto;
resize: none;
}
#chatUL{
border: 3px solid #333333;
width: 100%;
height: calc(100% - 270px);
overflow: auto;
min-height: 100px;
min-width: 157px;
}
#button4bajo{
  color: #FEFEFE;
  text-decoration: none;
  float: right;
}
#chatUL .uno {
border-radius: 10px;
color: #ef7575;
font-size: 17.4px;
font-family: sans-serif;
margin-left: 5px;
line-height: 30px;
max-height: 30px;
max-width: 95%;
resize: none;
overflow-y: hidden;
border: none;
background-color: #3a3a3a;
outline: none;
width: 75%;
}

.dos::-webkit-scrollbar
{
    width: 10px;
    height: 10px;
    background-color: #3a3a3a;
}

.dos::-webkit-scrollbar-thumb
{
border-radius: 10px;
background-color: #575758;
}

#chatUL .dos {
word-break: break-word;
white-space: pre-wrap;
width: 95%;
overflow: auto;
font-family: sans-serif;
font-size: 16px;
margin-top: 0px;
margin-bottom: 10px;
}
#chatUL .tres {
font-size: 11px;
margin-left: -111px;
float: right;
position: relative;
top: -17px;
right: 7px;
line-height: 10px;
color: #bcbcbc;
}
div.widget.PopularPosts {
  display: none;
}

a{
  color: #2196f3;
}

body{
  background-color: #1d1d1d;
  color: white;
  background-image: none;
  text-align: left;
  position: relative;
  cursor: default;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}
@media screen and (min-width:0px) and (max-width:900px) {
#div14{margin: 10px;}
#button4bajo{float: left;height: 0%;}
body{background-color: #1d1d1d;}
.bg-photo-overlay {background-color: #1d1d1d;}
button.svg-icon-24-button.back-button.rtl-reversible-icon.flat-icon-button.ripple {margin-left: -11px !important;margin-top: -11px !important;} 
}
}
section.comments {
   display: none;
}

div.post-bottom {
   display: none;
}

h3.post-title.entry-title {
   display: none;
}

div.post-header-line-1 {
   display: none;
}
        
div.blog-name.container {
  display: none;
}

svg.svg-icon-24.search-expand-icon {
  display: none;
}

header.centered-top-container.sticky.animating {
  display: none;
}

div.post-header-line-1 {
  display: none;
}

h3.post-title.entry-title {
  display: none;
}

div.flat-icon-button.ripple {
  display: none;
}

footer.footer.section {
  display: none;
}

button.svg-icon-24-button.back-button.rtl-reversible-icon.flat-icon-button.ripple {
  margin-left: 15px;
  margin-top: 5px;
}    
    
.gsc-control-cse {
   display:none;
}
  </style>
